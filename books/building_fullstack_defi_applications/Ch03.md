# Interacting with Smart Contracts and DeFi Wallets in the Frontend

This are the steps I've taken so far:

- Create an empty repo in Github fullstack-dapp-test-03
- git clone it in my computer
- install vite inside the folder: npm create vite@latest . -- --template react
- **remove the type:module from the package.json**
- npm install
- Run `npm run dev` to verify app is working, maybe change the title and push 1st commit
- npm install --save-dev hardhat
- rm README.md
- npx hardhat (from Powershell) > Create a JavaScript project
- Add Code Snippet 01 to hardhat.config.js
- mkdir -p src/backend/{contracts,artifacts,cache,test}
- rm -rf contracts test ignition
- npm install @openzeppelin/contracts
- Create src/backend/contracts/SimpleDeFiToken.sol and add code snippet 02
- npx hardhat compile to verify all is good
- Confirm the ABI is where it should be: src/backend/artifacts/src/backend/contracts/SimpleDeFiToken.sol/SimpleDeFiToken.json
- Enter the bytecode in https://etherscan.io/opcode-tool so you can see the opcodes
- Spend a couple of minutes taking a look at the ABI
- Run a local EVM environment by running npx hardhat node
- Create a file at scripts/deploy.js and add Code Snippet 03
- Run npx hardhat run scripts/deploy.js --network localhost
- Get an account at Alchemy
- Create a .env file with the format of snippet 04 and fill out the node addresses
- Add your private key from Metamask
- npm i dotenv
- Add the networks and dotenv to hardhat, copy snippet 05
- Get some sepoliaETH from a faucet
- Now deploy to Sepolia! npx hardhat run scripts/deploy.js --network ethereumSepolia
- Check the deployment on Etherscan, click on Token Tracker and confirm Total Supply, Holders, etc.
- Add "deploy": "npx hardhat run scripts/deploy.js --network" to package.json scripts
- Now you can run `npm run deploy localhost`, `npm run deploy arbitrumSepolia` etc 

Code Snippet 01
```javascript
require("@nomicfoundation/hardhat-toolbox");
/** @type import('hardhat/config').HardhatUserConfig */
module.exports = {
  solidity: "0.8.27",
  paths: {
    sources: "./src/backend/contracts",
    artifacts: "./src/backend/artifacts",
    cache: "./src/backend/cache",
    tests: "./src/backend/test"
  },
};
```

Code Snippet 02
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;
import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
contract SimpleDeFiToken is ERC20 {
    constructor() ERC20("Simple DeFi Token", "SDFT") {
        _mint(msg.sender, 1e24);
    }
}
```

Code Snippet 03
```javascript
const { ethers } = require("hardhat");

async function main() {
  const [deployer] = await ethers.getSigners();
  const tokenContractFactory = await ethers.getContractFactory(
    "SimpleDeFiToken"
  );
  const token = await tokenContractFactory.deploy();
  console.log("Simple DeFi Token Contract Address: ", token.target);
  console.log("Deployer: ", deployer.address);
  console.log(
    "Deployer ETH balance: ",
    (await deployer.provider.getBalance(deployer.address)).toString()
  );
}

// We recommend this pattern to be able to use async/await everywhere
// and properly handle errors.
main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
```

Code Snippet 04
```shell
SEPOLIA_API_URL="https://eth-sepolia.g.alchemy.com/v2/{your-api-key}"
BASE_SEPOLIA_API_URL="https://base-sepolia.g.alchemy.com/v2/{your-api-key}"
ARBITRUM_SEPOLIA_API_URL="https://arb-sepolia.g.alchemy.com/v2/{your-api-key}"
PRIVATE_KEY=paste_without_quotes
```

Code Snippet 05
```javascript
require("@nomicfoundation/hardhat-toolbox");
require("dotenv").config();

const SEPOLIA_API_URL = process.env.SEPOLIA_API_URL;
const BASE_SEPOLIA_API_URL = process.env.BASE_SEPOLIA_API_URL;
const ARBITRUM_SEPOLIA_API_URL = process.env.ARBITRUM_SEPOLIA_API_URL;
const PRIVATE_KEY = process.env.PRIVATE_KEY;

/** @type import('hardhat/config').HardhatUserConfig */
module.exports = {
  solidity: "0.8.27",
  paths: {
    sources: "./src/backend/contracts",
    artifacts: "./src/backend/artifacts",
    cache: "./src/backend/cache",
    tests: "./src/backend/test",
  },
  networks: {
    ethereumSepolia: {
      url: SEPOLIA_API_URL,
      accounts: [PRIVATE_KEY],
    },
    baseSepolia: {
      url: BASE_SEPOLIA_API_URL,
      accounts: [PRIVATE_KEY],
    },
    arbitrumSepolia: {
      url: ARBITRUM_SEPOLIA_API_URL,
      accounts: [PRIVATE_KEY],
    },
  },
};

```